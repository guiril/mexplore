(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d945195"],{"0b69":function(t,s,a){"use strict";var e=a("e72b"),i=a.n(e);i.a},"129f":function(t,s){t.exports=Object.is||function(t,s){return t===s?0!==t||1/t===1/s:t!=t&&s!=s}},1925:function(t,s,a){"use strict";var e=a("c1fb");s["a"]={search:function(t,s,a,i){return e["a"].instance.get("search",{params:{q:t,type:s,offset:a,limit:i}})}}},"296b":function(t,s,a){},"45fc":function(t,s,a){"use strict";var e=a("23e7"),i=a("b727").some,r=a("a640"),c=a("ae40"),l=r("some"),n=c("some");e({target:"Array",proto:!0,forced:!l||!n},{some:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"5ba7":function(t,s,a){"use strict";var e=a("b8e3"),i=a.n(e);i.a},6969:function(t,s,a){"use strict";var e=a("adea"),i=a.n(e);i.a},8418:function(t,s,a){"use strict";var e=a("c04e"),i=a("9bf2"),r=a("5c6c");t.exports=function(t,s,a){var c=e(s);c in t?i.f(t,c,r(0,a)):t[c]=a}},"841c":function(t,s,a){"use strict";var e=a("d784"),i=a("825a"),r=a("1d80"),c=a("129f"),l=a("14c3");e("search",1,(function(t,s,a){return[function(s){var a=r(this),e=void 0==s?void 0:s[t];return void 0!==e?e.call(s,a):new RegExp(s)[t](String(a))},function(t){var e=a(s,t,this);if(e.done)return e.value;var r=i(t),n=String(this),o=r.lastIndex;c(o,0)||(r.lastIndex=0);var u=l(r,n);return c(r.lastIndex,o)||(r.lastIndex=o),null===u?-1:u.index}]}))},8714:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content u-d-flex u-flex-column u-pb"},[a("div",{staticClass:"u-d-flex u-justify-content-between u-align-items-stretch u-px-15"},[a("div",{staticClass:"search"},[t._m(0),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"},{name:"focus",rawName:"v-focus"}],staticClass:"search__input",attrs:{type:"text",placeholder:"搜尋"},domProps:{value:t.searchText},on:{input:[function(s){s.target.composing||(t.searchText=s.target.value)},t.getSearch]}}),a("button",{staticClass:"search__clearInput",on:{click:t.clearSearchText}},[a("img",{attrs:{src:"/static/images/cancel.svg",alt:""}})])]),t._m(1)]),t.searchText||0!==t.searchHistory.length?t.searchText||0===t.searchHistory.length?t.searchText&&!t.isGetResults?a("SearchAlert",{attrs:{"search-text":t.searchText}}):t.searchText&&t.isGetResults?a("SearchResults",{attrs:{data:t.data,"search-text":t.searchText},on:{setSearchHistory:t.setSearchHistory,playtracks:t.playtracks}}):t._e():a("SearchHistory",{attrs:{"search-history":t.searchHistory},on:{clearSearchHistory:t.clearSearchHistory,clearAllSearchHistory:t.clearAllSearchHistory}}):a("SearchInit")],1)},i=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"search__img"},[a("img",{attrs:{src:"/static/images/search.svg",alt:""}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"close"},[a("button",{staticClass:"close__btn u-text-center"},[t._v(" 取消 ")])])}],r=(a("c740"),a("45fc"),a("a434"),a("ac1f"),a("841c"),a("1925")),c=function(){var t=this,s=t.$createElement;t._self._c;return t._m(0)},l=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"searchText u-text-center"},[a("p",{staticClass:"searchText__title"},[t._v(" 想播什麼就播 ")]),a("p",{staticClass:"searchText__subtitle"},[t._v(" 搜尋藝人、歌曲、專輯和更多內容。 ")])])}],n=(a("a4a3"),a("2877")),o={},u=Object(n["a"])(o,c,l,!1,null,"070ef8b0",null),_=u.exports,h=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[t._m(0),a("ul",{staticClass:"list"},t._l(t.searchHistory,(function(s){return a("li",{key:s.id,staticClass:"list__item u-px-15"},[a("a",{staticClass:"list__link",attrs:{href:"javascript:void(0)"}},["track"===s.type&&s.album.images?a("img",{staticClass:"list__img",attrs:{src:s.album.images[0].url,alt:""}}):s.images?a("img",{staticClass:"list__img",class:{"u-border-circle":"artist"===s.type},attrs:{src:s.images[0].url,alt:""}}):t._e(),a("div",{staticClass:"list__body"},[a("span",{staticClass:"list__title u-text-ellipsis"},[t._v(t._s(s.name))]),"track"===s.type?a("span",{staticClass:"list__text"},[t._v(" "+t._s(t._f("formatArtist")(s.artists))+" ")]):"artist"===s.type?a("span",{staticClass:"list__text"},[t._v(" 歌手 ")]):"album"===s.type?a("span",{staticClass:"list__text"},[t._v(" 專輯 ")]):"playlist"===s.type?a("span",{staticClass:"list__text"},[t._v(" 播放清單 ")]):t._e()]),a("button",{staticClass:"list__btn",on:{click:function(a){return a.preventDefault(),t.$emit("clearSearchHistory",s.id)}}},[t._v(" X ")])])])})),0),a("div",{staticClass:"searchClear u-text-center"},[a("button",{staticClass:"searchClear__btn",on:{click:function(s){return s.preventDefault(),t.$emit("clearAllSearchHistory")}}},[t._v(" 清除最近的搜尋內容 ")])])])},d=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"searchTitle u-pl-15"},[a("h2",{staticClass:"searchTitle__text"},[t._v(" 最近的搜尋 ")])])}],p={name:"SearchHistory",props:{searchHistory:{type:Array,default:function(){return[]}}}},f=p,m=(a("a689"),Object(n["a"])(f,h,d,!1,null,"67ee0c31",null)),v=m.exports,y=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"searchText u-text-center"},[a("p",{staticClass:"searchText__title searchText__title--sm"},[t._v(" 找不到「"+t._s(t.searchText)+"」 ")]),a("p",{staticClass:"searchText__subtitle"},[t._v(" 請嘗試用不同拼法或關鍵字再搜尋一次。 ")])])},x=[],C={name:"SearchAlert",props:{searchText:{type:String,default:""}}},b=C,g=(a("5ba7"),Object(n["a"])(b,y,x,!1,null,"40318f4c",null)),k=g.exports,T=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"u-pt"},[a("ul",{staticClass:"list list--striped"},[t._l(t.data.artists,(function(s){return a("li",{key:s.id,staticClass:"list__item u-px-15",on:{click:function(a){return a.preventDefault(),t.$emit("set-search-history",s)}}},[a("a",{staticClass:"list__link",attrs:{href:"javascript:void(0)"}},[s.images[0]?a("img",{staticClass:"list__img list__img--border-circle",attrs:{src:s.images[0].url,alt:s.name}}):t._e(),a("div",{staticClass:"list__body"},[a("span",{staticClass:"list__title u-text-ellipsis"},[t._v(t._s(s.name))]),a("span",{staticClass:"list__text"},[t._v("歌手")])]),a("span",{staticClass:"list__btn"},[t._v(" > ")])])])})),t._l(t.data.albums,(function(s){return a("li",{key:s.id,staticClass:"list__item u-px-15",on:{click:function(a){return a.preventDefault(),t.$emit("set-search-history",s)}}},[a("a",{staticClass:"list__link",attrs:{href:"javascript:void(0)"}},[s.images[0]?a("img",{staticClass:"list__img",attrs:{src:s.images[0].url,alt:s.name}}):t._e(),a("div",{staticClass:"list__body"},[a("span",{staticClass:"list__title u-text-ellipsis"},[t._v(t._s(s.name))]),a("span",{staticClass:"list__text"},[t._v("專輯")])]),a("span",{staticClass:"list__btn"},[t._v(" > ")])])])})),t._l(t.data.playlists,(function(s){return a("li",{key:s.id,staticClass:"list__item u-px-15",on:{click:function(a){return a.preventDefault(),t.$emit("set-search-history",s)}}},[a("a",{staticClass:"list__link",attrs:{href:"javascript:void(0)"}},[s.images[0]?a("img",{staticClass:"list__img",attrs:{src:s.images[0].url,alt:s.name}}):t._e(),a("div",{staticClass:"list__body"},[a("span",{staticClass:"list__title u-text-ellipsis"},[t._v(t._s(s.name))]),a("span",{staticClass:"list__text"},[t._v("播放清單")])]),a("span",{staticClass:"list__btn"},[t._v(" > ")])])])})),t._l(t.data.tracks,(function(s,e){return a("li",{key:s.id,staticClass:"list__item u-px-15",on:{click:function(a){return a.preventDefault(),t.$emit("set-search-history",s)}}},[a("a",{staticClass:"list__link",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.$emit("playtracks",e)}}},[s.album.images[0]?a("img",{staticClass:"list__img",attrs:{src:s.album.images[0].url,alt:s.name}}):t._e(),a("div",{staticClass:"list__body"},[a("span",{staticClass:"list__title u-text-ellipsis"},[t._v(t._s(s.name))]),a("span",{staticClass:"list__text"},[t._v("歌曲‧"+t._s(t._f("formatArtist")(s.artists)))])])]),a("button",{staticClass:"list__btn",on:{click:function(a){return a.preventDefault(),t.openTrackModal(s)}}},[t._v(" ... ")])])}))],2),a("ul",{staticClass:"list"},[a("li",{staticClass:"list__item u-px-15"},[a("router-link",{staticClass:"list__link",attrs:{to:{name:"SearchType",params:{q:t.searchText,type:"artist"}}}},[a("div",{staticClass:"list__body"},[t._v(" 檢視所有歌手 ")]),a("span",{staticClass:"list__btn"},[t._v(" > ")])])],1),a("li",{staticClass:"list__item u-px-15"},[a("router-link",{staticClass:"list__link",attrs:{to:{name:"SearchType",params:{q:t.searchText,type:"playlist"}}}},[a("div",{staticClass:"list__body"},[t._v(" 檢視所有播放清單 ")]),a("span",{staticClass:"list__btn"},[t._v(" > ")])])],1),a("li",{staticClass:"list__item u-px-15"},[a("router-link",{staticClass:"list__link",attrs:{to:{name:"SearchType",params:{q:t.searchText,type:"album"}}}},[a("div",{staticClass:"list__body"},[t._v(" 檢視所有專輯 ")]),a("span",{staticClass:"list__btn"},[t._v(" > ")])])],1),a("li",{staticClass:"list__item u-px-15"},[a("router-link",{staticClass:"list__link",attrs:{to:{name:"SearchType",params:{q:t.searchText,type:"track"}}}},[a("div",{staticClass:"list__body"},[t._v(" 檢視所有歌曲 ")]),a("span",{staticClass:"list__btn"},[t._v(" > ")])])],1)]),a("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animate__animated animate__fadeInUp animate__fast","leave-active-class":"animate__animated animate__fadeOutDown animate__fast"}},[t.isModalTrackOpen?a("ModalTrack",{attrs:{track:t.track},on:{closeModal:t.closeTrackModal}}):t._e()],1),a("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animate__animated animate__fadeInUp animate__fast","leave-active-class":"animate__animated animate__fadeOutDown animate__fast"}},[t.isModalTrackAddtoOpen?a("ModalTrackAddto",{on:{closeTrackAddto:function(s){t.isModalTrackAddtoOpen=!1}}}):t._e()],1)],1)},S=[],H=a("8ae1"),M=a("e7b1"),A={name:"SearchResults",components:{ModalTrack:H["a"],ModalTrackAddto:M["a"]},props:{data:{type:Object,default:function(){return{}}},searchText:{type:String,default:""}},data:function(){return{track:{},isModalTrackOpen:!1,isModalTrackAddtoOpen:!1}},watch:{isModalTrackOpen:function(t){this.$store.dispatch("setModalStatus",t)},isModalTrackAddtoOpen:function(t){this.$store.dispatch("setModalStatus",t)}},methods:{openTrackModal:function(t){this.track=t,this.isModalTrackOpen=!0},closeTrackModal:function(t){this.isModalTrackAddtoOpen=t,this.isModalTrackOpen=!1}}},O=A,$=(a("0b69"),Object(n["a"])(O,T,S,!1,null,"71a7cf76",null)),w=$.exports,I={name:"SearchDefault",components:{SearchInit:_,SearchHistory:v,SearchAlert:k,SearchResults:w},data:function(){return{searchText:"",data:{albums:[],artists:[],playlists:[],tracks:[]},searchHistory:[],isGetResults:!1}},watch:{searchText:function(t){t||(this.data={albums:[],artists:[],playlists:[],tracks:[]},this.isGetResults=!1)}},created:function(){this.getSearchHistory()},methods:{getSearch:function(){var t=this;this.searchText&&r["a"].search(this.searchText,"album,artist,playlist,track",0,2).then((function(s){console.log(s.data),0===s.data.albums.total&&0===s.data.artists.total&&0===s.data.playlists.total&&0===s.data.tracks.total?t.isGetResults=!1:t.isGetResults=!0,t.data.albums=s.data.albums.items,t.data.artists=s.data.artists.items,t.data.playlists=s.data.playlists.items,t.data.tracks=s.data.tracks.items}))},clearSearchText:function(){this.searchText=""},playtracks:function(t){this.data.tracks[t].preview_url?(this.$store.dispatch("playquee/setPlayquee",this.data.tracks),this.$store.dispatch("playquee/setNowplaying",t),this.$store.dispatch("playquee/setPlayerStatus","playing")):console.log("無法試聽")},setLocalStorage:function(){localStorage.setItem("search-history",JSON.stringify(this.searchHistory))},getSearchHistory:function(){var t=JSON.parse(localStorage.getItem("search-history"))||[];this.searchHistory=t},setSearchHistory:function(t){var s=this.searchHistory.some((function(s){return s.id===t.id}));s||(this.searchHistory.push(t),this.setLocalStorage())},clearSearchHistory:function(t){var s=this.searchHistory.findIndex((function(s){return s.id===t}));this.searchHistory.splice(s,1),this.setLocalStorage()},clearAllSearchHistory:function(){this.searchHistory=[],this.setLocalStorage()}}},j=I,E=(a("6969"),Object(n["a"])(j,e,i,!1,null,"5a47f67e",null));s["default"]=E.exports},a188:function(t,s,a){},a434:function(t,s,a){"use strict";var e=a("23e7"),i=a("23cb"),r=a("a691"),c=a("50c4"),l=a("7b0b"),n=a("65f0"),o=a("8418"),u=a("1dde"),_=a("ae40"),h=u("splice"),d=_("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,f=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";e({target:"Array",proto:!0,forced:!h||!d},{splice:function(t,s){var a,e,u,_,h,d,y=l(this),x=c(y.length),C=i(t,x),b=arguments.length;if(0===b?a=e=0:1===b?(a=0,e=x-C):(a=b-2,e=f(p(r(s),0),x-C)),x+a-e>m)throw TypeError(v);for(u=n(y,e),_=0;_<e;_++)h=C+_,h in y&&o(u,_,y[h]);if(u.length=e,a<e){for(_=C;_<x-e;_++)h=_+e,d=_+a,h in y?y[d]=y[h]:delete y[d];for(_=x;_>x-e+a;_--)delete y[_-1]}else if(a>e)for(_=x-e;_>C;_--)h=_+e-1,d=_+a-1,h in y?y[d]=y[h]:delete y[d];for(_=0;_<a;_++)y[_+C]=arguments[_+2];return y.length=x-e+a,u}})},a4a3:function(t,s,a){"use strict";var e=a("a188"),i=a.n(e);i.a},a689:function(t,s,a){"use strict";var e=a("296b"),i=a.n(e);i.a},adea:function(t,s,a){},b8e3:function(t,s,a){},c740:function(t,s,a){"use strict";var e=a("23e7"),i=a("b727").findIndex,r=a("44d2"),c=a("ae40"),l="findIndex",n=!0,o=c(l);l in[]&&Array(1)[l]((function(){n=!1})),e({target:"Array",proto:!0,forced:n||!o},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(l)},e72b:function(t,s,a){}}]);
//# sourceMappingURL=chunk-3d945195.0eca872e.js.map