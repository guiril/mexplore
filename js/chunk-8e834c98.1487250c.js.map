{"version":3,"sources":["webpack:///./src/views/Search/SearchType.vue?2e5c","webpack:///./node_modules/core-js/internals/same-value.js","webpack:///./src/api/search.js","webpack:///./src/views/Search/SearchType.vue?8b1e","webpack:///src/views/Search/SearchType.vue","webpack:///./src/views/Search/SearchType.vue?cd2c","webpack:///./src/views/Search/SearchType.vue","webpack:///./node_modules/core-js/modules/es.string.search.js"],"names":["module","exports","Object","is","x","y","search","q","type","offset","limit","request","instance","get","params","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","gobackSearch","_v","_s","dataType","_l","item","index","key","id","attrs","$event","preventDefault","playtracks","album","images","url","name","openTrackModal","class","track","closeTrackModal","_e","isModalTrackAddtoOpen","staticRenderFns","components","ModalTrack","ModalTrackAddto","data","items","isModalTrackOpen","watch","$store","dispatch","val","mounted","$route","getSearch","methods","$router","go","preview_url","console","log","emit","component","fixRegExpWellKnownSymbolLogic","anObject","requireObjectCoercible","sameValue","regExpExec","SEARCH","nativeSearch","maybeCallNative","regexp","O","searcher","undefined","call","RegExp","String","res","done","value","rx","S","previousLastIndex","lastIndex","result"],"mappings":"kHAAA,yBAA4jB,EAAG,G,qBCE/jBA,EAAOC,QAAUC,OAAOC,IAAM,SAAYC,EAAGC,GAE3C,OAAOD,IAAMC,EAAU,IAAND,GAAW,EAAIA,IAAM,EAAIC,EAAID,GAAKA,GAAKC,GAAKA,I,kCCJ/D,gBAEe,QACbC,OADa,SACNC,EAAGC,EAAMC,EAAQC,GACtB,OAAOC,OAAQC,SAASC,IAAI,SAAU,CACpCC,OAAQ,CACNP,IACAC,OACAC,SACAC,c,oECTR,IAAIK,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,SAAS,CAACE,YAAY,sCAAsCC,GAAG,CAAC,MAAQP,EAAIQ,eAAe,CAACJ,EAAG,OAAO,CAACE,YAAY,8BAA8B,CAACN,EAAIS,GAAG,OAAOL,EAAG,OAAO,CAACE,YAAY,sBAAsB,CAACN,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAIR,MAAM,OAAOQ,EAAIU,GAAGV,EAAIT,GAAG,WAAWa,EAAG,KAAK,CAACE,YAAY,sBAAsB,CAAmB,WAAjBN,EAAIW,SAAuBX,EAAIY,GAAIZ,EAAS,OAAE,SAASa,EAAKC,GAAO,OAAOV,EAAG,KAAK,CAACW,IAAIF,EAAKG,GAAGV,YAAY,sBAAsB,CAACF,EAAG,IAAI,CAACE,YAAY,aAAaW,MAAM,CAAC,KAAO,KAAKV,GAAG,CAAC,MAAQ,SAASW,GAAgC,OAAxBA,EAAOC,iBAAwBnB,EAAIoB,WAAWN,MAAU,CAACV,EAAG,MAAM,CAACE,YAAY,YAAYW,MAAM,CAAC,IAAMJ,EAAKQ,MAAMC,OAAO,GAAGC,IAAI,IAAMV,EAAKW,QAAQpB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,OAAO,CAACE,YAAY,+BAA+B,CAACN,EAAIS,GAAGT,EAAIU,GAAGG,EAAKW,aAAapB,EAAG,SAAS,CAACE,YAAY,YAAYC,GAAG,CAAC,MAAQ,SAASW,GAAgC,OAAxBA,EAAOC,iBAAwBnB,EAAIyB,eAAeZ,MAAS,CAACb,EAAIS,GAAG,gBAAeT,EAAIY,GAAIZ,EAAS,OAAE,SAASa,GAAM,OAAOT,EAAG,KAAK,CAACW,IAAIF,EAAKG,GAAGV,YAAY,sBAAsB,CAACF,EAAG,IAAI,CAACE,YAAY,aAAaW,MAAM,CAAC,KAAO,uBAAuB,CAACb,EAAG,MAAM,CAACE,YAAY,YAAYoB,MAAM,CAAE,2BAA6C,YAAjB1B,EAAIW,UAAwBM,MAAM,CAAC,IAAMJ,EAAKS,OAAO,GAAGC,IAAI,IAAMV,EAAKW,QAAQpB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,OAAO,CAACE,YAAY,+BAA+B,CAACN,EAAIS,GAAGT,EAAIU,GAAGG,EAAKW,WAAWpB,EAAG,OAAO,CAACE,YAAY,aAAa,CAACN,EAAIS,GAAG,iBAAgB,GAAGL,EAAG,aAAa,CAACa,MAAM,CAAC,KAAO,4BAA4B,qBAAqB,oDAAoD,qBAAqB,yDAAyD,CAAEjB,EAAoB,iBAAEI,EAAG,aAAa,CAACa,MAAM,CAAC,MAAQjB,EAAI2B,OAAOpB,GAAG,CAAC,WAAaP,EAAI4B,mBAAmB5B,EAAI6B,MAAM,GAAGzB,EAAG,aAAa,CAACa,MAAM,CAAC,KAAO,4BAA4B,qBAAqB,oDAAoD,qBAAqB,yDAAyD,CAAEjB,EAAyB,sBAAEI,EAAG,kBAAkB,CAACG,GAAG,CAAC,gBAAkB,SAASW,GAAQlB,EAAI8B,uBAAwB,MAAU9B,EAAI6B,MAAM,IAAI,IACnvEE,EAAkB,G,0DC8FtB,GACEP,KAAM,aACNQ,WAAY,CACVC,WAAJ,OACIC,gBAAJ,QAEEC,KANF,WAOI,MAAO,CACL5C,EAAG,KACHC,KAAM,KACNmB,SAAU,KACVyB,MAAO,GACPT,MAAO,GACPU,kBAAkB,EAClBP,uBAAuB,IAG3BQ,MAAO,CACLD,iBADJ,SACA,GACMpC,KAAKsC,OAAOC,SAAS,iBAAkBC,IAEzCX,sBAJJ,SAIA,GACM7B,KAAKsC,OAAOC,SAAS,iBAAkBC,KAG3CC,QAzBF,WAyBA,IACA,0BACI,OAAQlD,GACN,IAAK,SACHS,KAAKT,KAAO,KACZS,KAAKU,SAAW,UAChB,MACF,IAAK,WACHV,KAAKT,KAAO,OACZS,KAAKU,SAAW,YAChB,MACF,IAAK,QACHV,KAAKT,KAAO,KACZS,KAAKU,SAAW,SAChB,MACF,IAAK,QACHV,KAAKT,KAAO,KACZS,KAAKU,SAAW,SAChB,MACF,QACE,MAEJV,KAAKV,EAAIU,KAAK0C,OAAO7C,OAAOP,EAC5BU,KAAK2C,aAEPC,QAAS,CACPrC,aADJ,WAEMP,KAAK6C,QAAQC,IAAI,IAEnBH,UAJJ,WAKM,IAAN,OACMtD,EAAN,iDACA,kBACQ,QAAR,8BACQ,EAAR,mCAII8B,WAbJ,SAaA,GACWnB,KAAKmC,MAAMtB,GAAOkC,aAGrB/C,KAAKsC,OAAOC,SAAS,uBAAwBvC,KAAKmC,OAClDnC,KAAKsC,OAAOC,SAAS,yBAA0B1B,GAC/Cb,KAAKsC,OAAOC,SAAS,2BAA4B,YAJjDS,QAAQC,IAAI,SAOhBzB,eAtBJ,SAsBA,GACMxB,KAAK0B,MAAQd,EACbZ,KAAKoC,kBAAmB,GAE1BT,gBA1BJ,SA0BA,GACM3B,KAAK6B,sBAAwBqB,EAC7BlD,KAAKoC,kBAAmB,KC7KqU,I,wBCQ/Ve,EAAY,eACd,EACArD,EACAgC,GACA,EACA,KACA,WACA,MAIa,aAAAqB,E,6CClBf,IAAIC,EAAgC,EAAQ,QACxCC,EAAW,EAAQ,QACnBC,EAAyB,EAAQ,QACjCC,EAAY,EAAQ,QACpBC,EAAa,EAAQ,QAGzBJ,EAA8B,SAAU,GAAG,SAAUK,EAAQC,EAAcC,GACzE,MAAO,CAGL,SAAgBC,GACd,IAAIC,EAAIP,EAAuBtD,MAC3B8D,OAAqBC,GAAVH,OAAsBG,EAAYH,EAAOH,GACxD,YAAoBM,IAAbD,EAAyBA,EAASE,KAAKJ,EAAQC,GAAK,IAAII,OAAOL,GAAQH,GAAQS,OAAOL,KAI/F,SAAUD,GACR,IAAIO,EAAMR,EAAgBD,EAAcE,EAAQ5D,MAChD,GAAImE,EAAIC,KAAM,OAAOD,EAAIE,MAEzB,IAAIC,EAAKjB,EAASO,GACdW,EAAIL,OAAOlE,MAEXwE,EAAoBF,EAAGG,UACtBlB,EAAUiB,EAAmB,KAAIF,EAAGG,UAAY,GACrD,IAAIC,EAASlB,EAAWc,EAAIC,GAE5B,OADKhB,EAAUe,EAAGG,UAAWD,KAAoBF,EAAGG,UAAYD,GAC9C,OAAXE,GAAmB,EAAIA,EAAO7D","file":"js/chunk-8e834c98.1487250c.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchType.vue?vue&type=style&index=0&id=82db05ec&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchType.vue?vue&type=style&index=0&id=82db05ec&lang=scss&scoped=true&\"","// `SameValue` abstract operation\n// https://tc39.github.io/ecma262/#sec-samevalue\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","import request from './http';\n\nexport default {\n  search(q, type, offset, limit) {\n    return request.instance.get('search', {\n      params: {\n        q,\n        type,\n        offset,\n        limit,\n      },\n    });\n  },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"u-pb\"},[_c('div',{staticClass:\"searchTopbar\"},[_c('button',{staticClass:\"searchTopbar__btn u-d-block u-w-100\",on:{\"click\":_vm.gobackSearch}},[_c('span',{staticClass:\"searchTopbar__icon u-pl-15\"},[_vm._v(\">\")]),_c('span',{staticClass:\"searchTopbar__text\"},[_vm._v(\"在\"+_vm._s(_vm.type)+\"中搜尋「\"+_vm._s(_vm.q)+\"」\")])])]),_c('ul',{staticClass:\"list list--striped\"},[(_vm.dataType === 'tracks')?_vm._l((_vm.items),function(item,index){return _c('li',{key:item.id,staticClass:\"list__item u-px-15\"},[_c('a',{staticClass:\"list__link\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.playtracks(index)}}},[_c('img',{staticClass:\"list__img\",attrs:{\"src\":item.album.images[0].url,\"alt\":item.name}}),_c('div',{staticClass:\"list__body\"},[_c('span',{staticClass:\"list__title u-text-ellipsis\"},[_vm._v(_vm._s(item.name))])])]),_c('button',{staticClass:\"list__btn\",on:{\"click\":function($event){$event.preventDefault();return _vm.openTrackModal(item)}}},[_vm._v(\" ... \")])])}):_vm._l((_vm.items),function(item){return _c('li',{key:item.id,staticClass:\"list__item u-px-15\"},[_c('a',{staticClass:\"list__link\",attrs:{\"href\":\"javascript:void(0)\"}},[_c('img',{staticClass:\"list__img\",class:{ 'list__img--border-circle': _vm.dataType === 'artists'},attrs:{\"src\":item.images[0].url,\"alt\":item.name}}),_c('div',{staticClass:\"list__body\"},[_c('span',{staticClass:\"list__title u-text-ellipsis\"},[_vm._v(_vm._s(item.name))])]),_c('span',{staticClass:\"list__btn\"},[_vm._v(\" > \")])])])})],2),_c('transition',{attrs:{\"name\":\"custom-classes-transition\",\"enter-active-class\":\"animate__animated animate__fadeInUp animate__fast\",\"leave-active-class\":\"animate__animated animate__fadeOutDown animate__fast\"}},[(_vm.isModalTrackOpen)?_c('ModalTrack',{attrs:{\"track\":_vm.track},on:{\"closeModal\":_vm.closeTrackModal}}):_vm._e()],1),_c('transition',{attrs:{\"name\":\"custom-classes-transition\",\"enter-active-class\":\"animate__animated animate__fadeInUp animate__fast\",\"leave-active-class\":\"animate__animated animate__fadeOutDown animate__fast\"}},[(_vm.isModalTrackAddtoOpen)?_c('ModalTrackAddto',{on:{\"closeTrackAddto\":function($event){_vm.isModalTrackAddtoOpen = false}}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"u-pb\">\n    <div class=\"searchTopbar\">\n      <button\n        class=\"searchTopbar__btn u-d-block u-w-100\"\n        @click=\"gobackSearch\"\n      >\n        <span class=\"searchTopbar__icon u-pl-15\">></span>\n        <span class=\"searchTopbar__text\">在{{ type }}中搜尋「{{ q }}」</span>\n      </button>\n    </div>\n    <ul class=\"list list--striped\">\n      <template v-if=\"dataType === 'tracks'\">\n        <li\n          v-for=\"(item, index) in items\"\n          :key=\"item.id\"\n          class=\"list__item u-px-15\"\n        >\n          <a\n            href=\"#\"\n            class=\"list__link\"\n            @click.prevent=\"playtracks(index)\"\n          >\n            <img\n              :src=\"item.album.images[0].url\"\n              :alt=\"item.name\"\n              class=\"list__img\"\n            >\n            <div class=\"list__body\">\n              <span class=\"list__title u-text-ellipsis\">{{ item.name }}</span>\n            </div>\n          </a>\n          <button\n            class=\"list__btn\"\n            @click.prevent=\"openTrackModal(item)\"\n          >\n            ...\n          </button>\n        </li>\n      </template>\n      <template v-else>\n        <li\n          v-for=\"item in items\"\n          :key=\"item.id\"\n          class=\"list__item u-px-15\"\n        >\n          <a\n            href=\"javascript:void(0)\"\n            class=\"list__link\"\n          >\n            <img\n              :src=\"item.images[0].url\"\n              :alt=\"item.name\"\n              class=\"list__img\"\n              :class=\"{ 'list__img--border-circle': dataType === 'artists'}\"\n            >\n            <div class=\"list__body\">\n              <span class=\"list__title u-text-ellipsis\">{{ item.name }}</span>\n            </div>\n            <span class=\"list__btn\">\n              >\n            </span>\n          </a>\n        </li>\n      </template>\n    </ul>\n    <transition\n      name=\"custom-classes-transition\"\n      enter-active-class=\"animate__animated animate__fadeInUp animate__fast\"\n      leave-active-class=\"animate__animated animate__fadeOutDown animate__fast\"\n    >\n      <ModalTrack\n        v-if=\"isModalTrackOpen\"\n        :track=\"track\"\n        @closeModal=\"closeTrackModal\"\n      />\n    </transition>\n    <transition\n      name=\"custom-classes-transition\"\n      enter-active-class=\"animate__animated animate__fadeInUp animate__fast\"\n      leave-active-class=\"animate__animated animate__fadeOutDown animate__fast\"\n    >\n      <ModalTrackAddto\n        v-if=\"isModalTrackAddtoOpen\"\n        @closeTrackAddto=\"isModalTrackAddtoOpen = false\"\n      />\n    </transition>\n  </div>\n</template>\n\n<script>\nimport search from '@/api/search';\nimport ModalTrack from '@/components/Modal/ModalTrack.vue';\nimport ModalTrackAddto from '@/components/Modal/ModalTrackAddto.vue';\n\nexport default {\n  name: 'SearchType',\n  components: {\n    ModalTrack,\n    ModalTrackAddto,\n  },\n  data() {\n    return {\n      q: null,\n      type: null,\n      dataType: null,\n      items: [],\n      track: {},\n      isModalTrackOpen: false,\n      isModalTrackAddtoOpen: false,\n    };\n  },\n  watch: {\n    isModalTrackOpen(val) {\n      this.$store.dispatch('setModalStatus', val);\n    },\n    isModalTrackAddtoOpen(val) {\n      this.$store.dispatch('setModalStatus', val);\n    },\n  },\n  mounted() {\n    const { type } = this.$route.params;\n    switch (type) {\n      case 'artist':\n        this.type = '歌手';\n        this.dataType = 'artists';\n        break;\n      case 'playlist':\n        this.type = '播放清單';\n        this.dataType = 'playlists';\n        break;\n      case 'album':\n        this.type = '專輯';\n        this.dataType = 'albums';\n        break;\n      case 'track':\n        this.type = '歌曲';\n        this.dataType = 'tracks';\n        break;\n      default:\n        break;\n    }\n    this.q = this.$route.params.q;\n    this.getSearch();\n  },\n  methods: {\n    gobackSearch() {\n      this.$router.go(-1);\n    },\n    getSearch() {\n      const vm = this;\n      search.search(this.q, this.$route.params.type, 0, 10)\n        .then((res) => {\n          console.log(res.data[vm.dataType].items);\n          vm.items = res.data[vm.dataType].items;\n          // console.log(vm.dataType);\n        });\n    },\n    playtracks(index) {\n      if (!this.items[index].preview_url) {\n        console.log('無法試聽');\n      } else {\n        this.$store.dispatch('playquee/setPlayquee', this.items);\n        this.$store.dispatch('playquee/setNowplaying', index);\n        this.$store.dispatch('playquee/setPlayerStatus', 'playing');\n      }\n    },\n    openTrackModal(item) {\n      this.track = item;\n      this.isModalTrackOpen = true;\n    },\n    closeTrackModal(emit) {\n      this.isModalTrackAddtoOpen = emit;\n      this.isModalTrackOpen = false;\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.searchTopbar {\n  &__btn {\n    padding-top: 20px;\n    padding-bottom: 20px;\n    font-size: 12px;\n    color: $base-dark-bg;\n    @include clearfix;\n  }\n  &__icon {\n    float: left;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchType.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchType.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchType.vue?vue&type=template&id=82db05ec&scoped=true&\"\nimport script from \"./SearchType.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchType.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchType.vue?vue&type=style&index=0&id=82db05ec&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"82db05ec\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar sameValue = require('../internals/same-value');\nvar regExpExec = require('../internals/regexp-exec-abstract');\n\n// @@search logic\nfixRegExpWellKnownSymbolLogic('search', 1, function (SEARCH, nativeSearch, maybeCallNative) {\n  return [\n    // `String.prototype.search` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.search\n    function search(regexp) {\n      var O = requireObjectCoercible(this);\n      var searcher = regexp == undefined ? undefined : regexp[SEARCH];\n      return searcher !== undefined ? searcher.call(regexp, O) : new RegExp(regexp)[SEARCH](String(O));\n    },\n    // `RegExp.prototype[@@search]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@search\n    function (regexp) {\n      var res = maybeCallNative(nativeSearch, regexp, this);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n\n      var previousLastIndex = rx.lastIndex;\n      if (!sameValue(previousLastIndex, 0)) rx.lastIndex = 0;\n      var result = regExpExec(rx, S);\n      if (!sameValue(rx.lastIndex, previousLastIndex)) rx.lastIndex = previousLastIndex;\n      return result === null ? -1 : result.index;\n    }\n  ];\n});\n"],"sourceRoot":""}